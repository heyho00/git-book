# 3. React

## í•™ìŠµ í‚¤ì›Œë“œ

* Reactë€?
* ì»´í¬ë„ŒíŠ¸
* ë¦¬ë Œë”ë§
* IoC(Inversion of Control)
* Library vs Framework

<br>

## ì¬ì¡°ì •

íŠ¸ë¦¬ì˜ ê°™ì€ ìœ„ì¹˜ì— ìˆëŠ” ì—˜ë¦¬ë¨¼íŠ¸ íƒ€ì…ì´ ì´ì „ ë Œë”ë§ê³¼ ë‹¤ìŒ ë Œë”ë§ ì‚¬ì´ì— ì¼ì¹˜í•˜ë©´

 ReactëŠ” ê¸°ì¡´ í˜¸ìŠ¤íŠ¸ ê°ì²´ë¥¼ ë‹¤ì‹œ ì‚¬ìš©.


```js
// let domNode = document.createElement('button');
// domNode.className = 'blue';
// domContainer.appendChild(domNode);
ReactDOM.render(
  <button className="blue" />,
  document.getElementById('container')
);

// í˜¸ìŠ¤íŠ¸ ê°ì²´ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œìš”? ë„¤! (button â†’ button)
// domNode.className = 'red';
ReactDOM.render(
  <button className="red" />,
  document.getElementById('container')
);

// í˜¸ìŠ¤íŠ¸ ê°ì²´ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œìš”? ì•„ë‡¨! (button â†’ p)
// domContainer.removeChild(domNode);
// domNode = document.createElement('p');
// domNode.textContent = 'Hello';
// domContainer.appendChild(domNode);
ReactDOM.render(
  <p>Hello</p>,
  document.getElementById('container')
);

// í˜¸ìŠ¤íŠ¸ ê°ì²´ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œìš”? ë„¤! (p â†’ p)
// domNode.textContent = 'Goodbye';
ReactDOM.render(
  <p>Goodbye</p>,
  document.getElementById('container')
);
```

<br>

## ì œì–´ì˜ ì—­ì „

ì™œ ì§ì ‘ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” ê±°ì§€? ì™œ `Form()` ëŒ€ì‹  `<Form />`ì´ë¼ê³  ì¨ì•¼ í•˜ëŠ” ê±°ì•¼? 

ReactëŠ” Reactê°€ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ ì•„ëŠ” ê²ƒì´ ì¬ê·€ì ìœ¼ë¡œ í˜¸ì¶œí•œ React ì—˜ë¦¬ë¨¼íŠ¸ íŠ¸ë¦¬ë§Œ ë³´ëŠ” ê²ƒë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

```js
// ğŸ”´ ReactëŠ” Layoutì´ë‚˜ Articleì´ ì¡´ì¬í•˜ëŠ”ì§€ ëª¨ë¦…ë‹ˆë‹¤.
// ì»´í¬ë„ŒíŠ¸ë¥¼ ì§ì ‘ í˜¸ì¶œí•©ë‹ˆë‹¤.
ReactDOM.render(
  Layout({ children: Article() }),
  domContainer
)

// âœ… ReactëŠ” Layoutê³¼ Articleì˜ ì¡´ì¬ë¥¼ ì•Œê²Œ ë©ë‹ˆë‹¤.
// Reactê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
ReactDOM.render(
  <Layout><Article /></Layout>,
  domContainer
)
```

1. ì»´í¬ë„ŒíŠ¸ëŠ” í•¨ìˆ˜ ì´ìƒì˜ ì—­í• ì„ í•œë‹¤.
    reactëŠ” ìƒí˜¸ ì‘ìš©ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ UIíŠ¸ë¦¬ë¥¼ ë Œë”í•œë‹¤. 
    ì»´í¬ë„ŒíŠ¸ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´ ì´ ê¸°ëŠ¥ì„ ì§ì ‘ êµ¬ì¶•í•´ì•¼í•œë‹¤.
    ì¶”ìƒí™”ë¥¼ ì œê³µí•œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

2. ì»´í¬ë„ŒíŠ¸ íƒ€ì…ìœ¼ë¡œ ì¬ì¡°ì •.
    íŠ¸ë¦¬ì˜ ê°œë… êµ¬ì¡°ë¥¼ ë” ë§ì´ ì•Œë ¤ì¤„ ìˆ˜ ìˆë‹¤.

3. reactê°€ ì¬ì¡°ì •ì„ ì§€ì—°í•  ìˆ˜ ìˆë‹¤.
    ë¸Œë¼ìš°ì €ê°€ ì»´í¬ë„ŒíŠ¸ í˜¸ì¶œ ì‚¬ì´ì—ì„œ ì¼ë¶€ ì‘ì—…ì„ í•  ìˆ˜ ìˆê²Œë˜ì–´ í° ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ë¥¼ ë‹¤ì‹œ ë Œë”ë§ í•˜ë”ë¼ë„
    *ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ë©ˆì¶”ì§€ ì•Šê²Œ í•  ìˆ˜ ìˆë‹¤.* ì´ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¡°ìœ¨í•  í•„ìš”ì—†ë‹¤.

4. ë””ë²„ê¹…
    ì»´í¬ë„ŒíŠ¸ê°€ ì¼ê¸‰ ê°ì²´ë¼ë©´ ë‚˜ì€ ê°œë°œ ë„êµ¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

ë§ˆì§€ë§‰ ì´ì ì€ *ì§€ì—° í‰ê°€*ì´ë‹¤.

## ì§€ì—°í‰ê°€

```js
// (2) ë‚˜ì¤‘ì— ê³„ì‚°ë©ë‹ˆë‹¤.
eat(
  // (1) ë¨¼ì € ê³„ì‚°ë©ë‹ˆë‹¤.
  prepareMeal()
);
```

ì»´í¬ë„ŒíŠ¸ë¡œ í‘œí˜„í•˜ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì–´ë”˜ê°€ì—ì„œ ì‚¬ìš©ë˜ê¸° ì „ê¹Œì§€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

ì¡°ê±´ì— ë”°ë¼ í•¨ìˆ˜ë¥¼ ì¼ì° ì¢…ë£Œì‹œí‚¬ ìˆ˜ ìˆë‹¤.

```js
function Page({ user, children }) {
  if (!user.isLoggedIn) {
    return <h1>Please log in</h1>;
  }
  return (
    <Layout>
      {children}
    </Layout>
  );
}
```

í•¨ìˆ˜ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´ page ì»´í¬ë„ŒíŠ¸ê°€ ê·¸ë¦¬ê¸¸ ì›ì¹˜ ì•Šì•„ë„ ì¦‰ì‹œ ì‹¤í–‰ë¨.

```js
// {
//   type: Page,
//   props: {
//     children: Comments() // í•­ìƒ ì‹¤í–‰ë©ë‹ˆë‹¤!
//   }
// }
<Page>
  {Comments()}
</Page>
```

ê²°ë¡ ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¡œ ì‘ì„±í•˜ë©´ reactê°€ í˜¸ì¶œ ì‹œì ì„ ê²°ì •í•  ìˆ˜ ìˆë‹¤.

ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ í”¼í•˜ê³  ì½”ë“œì˜ ì·¨ì•½ì„±ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

<br>

setState í˜¸ì¶œì€ ì¦‰ì‹œ ë Œë”ë§ì„ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤.

ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ í•˜ì§€ ì•Šë„ë¡.

ì¼ê´„ ê°±ì‹ ì€ ì„±ëŠ¥ì— ì¢‹ì§€ë§Œ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œëŠ” ë¬¸ì œê°€ ëœë‹¤.

```js
  const [count, setCounter] = useState(0);

  function increment() {
    setCounter(count+1);
  }

  function handleClick() {
    increment();
    increment();
    increment();
  }
```

ì´ ì½”ë“œëŠ” ì„¸ë²ˆì˜ setCount(1)ì„ í˜¸ì¶œí•´ë²„ë¦°ë‹¤.

ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê°±ì‹  í•¨ìˆ˜ë¥¼ ì¸ìë¡œë„ ë°›ëŠ”ë‹¤.

```js
  const [count, setCounter] = useState(0);

  function increment() {
    setCounter(c => c + 1);
  }

  function handleClick() {
    increment();
    increment();
    increment();
  }
```

ReactëŠ” ê°±ì‹  í•¨ìˆ˜ë“¤ì„ íì— ìŒ“ì•„ë†“ê³  ë‚˜ì¤‘ì— ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•œë‹¤.

count ê²°ê³¼ëŠ” 3ì´ë‹¤.

ìƒíƒœ ë¡œì§ì´ ë³µì¡í•´ì§„ë‹¤ë©´ ì§€ì—­ ìƒíƒœë¥¼ useReducer í›…ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸¸ ê¶Œì¥í•œë‹¤.

```js
const [counter, dispatch] = useReducer((state, action) => {
    if (action === 'increment') {
      return state + 1;
    } else {
      return state;
    }
  }, 0);

  function handleClick() {
    dispatch('increment');
    dispatch('increment');
    dispatch('increment');
  }
```

<br>

## í˜¸ì¶œ íŠ¸ë¦¬

ReactëŠ” JS ì½œìŠ¤íƒê³¼ ë”°ë¡œ ë‚´ë¶€ì ì¸ ìì²´ ì½œìŠ¤íƒì´ ìˆë‹¤.

í˜„ì¬ ë Œë”ë§ í•˜ê³ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ê¸°ì–µí•˜ê¸° ìœ„í•œ.

Reactì˜ UI íŠ¸ë¦¬ë“¤ì€ ìƒí˜¸ì‘ìš© í•˜ê¸°ìœ„í•´ ê³„ì† ì‚´ì•„ìˆì–´ì•¼ í•œë‹¤.

DOMì€ ì²« ë²ˆì§¸ React.DOM.render() í˜¸ì¶œ í›„ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤.

<br>

## ì»¨í…ìŠ¤íŠ¸

ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì™€ ê¹Šì€ ìì‹ì— propsë¥¼ ì „ë‹¬í•˜ëŠ”ê²ƒì€ ë²ˆê±°ë¡­ë‹¤.

ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ„í•œ ë™ì  ìŠ¤ì½”í•‘ì˜ ì •ìˆ˜.

```js
const ThemeContext = React.createContext(
  'light' // ê¸°ë³¸ê°’
);

function DarkApp() {
  return (
    <ThemeContext.Provider value="dark">
      <MyComponents />
    </ThemeContext.Provider>
  );
}

function SomeDeeplyNestedChild() {
  // Depends on where the child is rendered
  const theme = useContext(ThemeContext);
  // ...
}
```

SomeDeeplyNestedChildê°€ ë Œë”ë§ ë  ë•Œ useContext(ThemeContext)ì€ íŠ¸ë¦¬ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ë¶€ëª¨ 

<ThemeContext.Provider>ë¥¼ ì°¾ê³  valueë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

íŠ¸ë¦¬ì—ì„œ ThemeContext.Providerë¥¼ ì°¾ì§€ ëª»í–ˆë‹¤ë©´ useContext(ThemeContext)ëŠ” 

createContext() í˜¸ì¶œì— ëª…ì‹œëœ ê¸°ë³¸ê°’ì„ ì‚¬ìš©. ìœ„ ì˜ˆì œì—ì„œëŠ” `'light'`

<br>

## useEffect

useEffectì˜ Dependency arrayë¥¼ ì´ìš©í•´ ìµœì í™”ë¥¼ í•˜ëŠ”ë°

JS í´ë¡œì €ì— ìµìˆ™í•˜ì§€ ì•Šìœ¼ë©´ ì„±ê¸‰í•œ ìµœì í™” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

```js
function handleChange() {
    console.log(count);
  }

useEffect(() => {
    DataSource.addSubscription(handleChange);
    return () => DataSource.removeSubscription(handleChange);
  }, []);
```

handleChangeê°€ ë°”ë€Œë”ë¼ë„ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë°,

handleChangeëŠ” ë‹¤ë¥¸ propsë‚˜ ìƒíƒœë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.

ê°±ì‹ ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ handleChangeëŠ” ê³„ì† ì²«ë²ˆì§¸ ë Œë”ë§ì— ìˆëŠ” ìƒíƒœë¥¼ ì°¸ì¡°í•´ 

countëŠ” ë‚´ë¶€ì—ì„œ í•­ìƒ 0ì´ ëœë‹¤. ì•„ë˜ì²˜ëŸ¼ ì˜ì¡´ì„± ë°°ì—´ì— ì¶”ê°€í•´ì¤€ë‹¤.

```js
useEffect(() => {
    DataSource.addSubscription(handleChange);
    return () => DataSource.removeSubscription(handleChange);
  }, [handleChange]);
```

ì½”ë“œì— ë”°ë¼ ë Œë”ë§ í•  ë•Œë§ˆë‹¤ í•„ìš”ì—†ëŠ” HandleChange ë•Œë¬¸ì— í•„ìš” ì—†ëŠ” êµ¬ë…ì´ ë°œìƒí•˜ë©´

useCallback í›…ìœ¼ë¡œ í•´ì†Œí•  ìˆ˜ ìˆë‹¤.

<br>

## Custom hook

ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì— ìƒíƒœê°€ ìˆëŠ” ë¡œì§ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•¨.

**ìƒíƒœëŠ” ì»´í¬ë„ŒíŠ¸ë³„ë¡œ ë…ë¦½ì  (í›…ì„ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ê²©ë¦¬ëœ ìƒíƒœë¥¼ ì„ ì–¸í•¨)**

```js
function MyResponsiveComponent() {
  const width = useWindowWidth(); // ì»¤ìŠ¤í…€ í›…
  return (
    <p>Window width is {width}</p>
  );
}

function useWindowWidth() {
  const [width, setWidth] = useState(window.innerWidth);

  useEffect(() => {
    const handleResize = () => setWidth(window.innerWidth);
    window.addEventListener('resize', handleResize);
    return () => {
      window.removeEventListener('resize', handleResize);
    };
  });

  return width;
}
```

<br>

## React ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ê°€, í”„ë ˆì„ì›¤ì¸ê°€ (ì“¸ë°ì—†ìŒ)

ì œì–´ì˜ ì—­ì „ì„ ì´ìš©í•´ ìƒíƒœì™€ ì—…ë°ì´íŠ¸ê°€ ì–½íŒ ë³µì¡í•œ ìƒí™©ì„ ê°„ë‹¨íˆ **ì„ ì–¸í˜• UIë¡œ êµ¬ì„±**í•˜ëŠ”ê²Œ Frameworkì˜ ì£¼ìš” íŠ¹ì§•.

ì•„ë¬´ë„ ë§¤ë²ˆ rootë¥¼ renderí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì“°ì§€ ì•ŠëŠ”ë‹¤.

í”„ë ˆì„ì›¤ì´ì ë¼ì´ë¸ŒëŸ¬ë¦¬. 

[ì°¸ê³ ](https://overreacted.io/ko/react-as-a-ui-runtime/)

[ReactëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì–¸ì œ ë‹¤ì‹œ ë¦¬ë Œë”ë§ í• ê¹Œìš”?](https://velog.io/@surim014/react-rerender)

[React ë Œë”ë§ ë™ì‘ì— ëŒ€í•œ (ê±°ì˜) ì™„ë²½í•œ ê°€ì´ë“œ](https://velog.io/@superlipbalm/blogged-answers-a-mostly-complete-guide-to-react-rendering-behavior)

